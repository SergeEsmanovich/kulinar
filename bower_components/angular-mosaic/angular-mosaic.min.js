!function(window,angular){angular.module("codinghitchhiker.mosaic",[]).directive("mosaic",function($rootScope,$window,$interval){return{restrict:"AE",template:'<div class="layout"></div><div ng-repeat="column in columns" class="column column{{::$index+1}}"><div ng-repeat="lhs in column" class="item item{{::$index+1}}"><div mosaic-transclude></div></div></div>',transclude:!0,priority:1001,compile:function($element,$attr){var expression=$attr.mosaic;$element.addClass("mosaic");var match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)$/);if(!match)throw"Expected expression in form of '_item_ in _collection_' but got '"+expression+"'.";var lhs=match[1],rhs=match[2];return $element.html($element.html().replace('ng-repeat="lhs in column"','ng-repeat="'+lhs+' in column"')),function($scope,$element){function updateColumns(force){if($window.innerWidth!==lastWidth&&layout.offsetWidth!==columnCount||force){lastWidth=$window.innerWidth,$element.removeClass("col-"+columnCount),columnCount=layout.offsetWidth,$element.addClass("col-"+columnCount);var columns=[];angular.forEach($scope.$eval(rhs),function(value,index){index%=columnCount,columns[index]||(columns[index]=[]),columns[index].push(value)}),$scope.columns=columns}}function onResize(){timer&&$interval.cancel(timer),timer=$interval(updateColumns,50,1)}$scope.$watchCollection(rhs,function(newVal,oldVal){updateColumns(newVal!==oldVal)});var lastWidth=0,columnCount=0,layout=$element.children()[0];if("layout"!=layout.className)throw"Layout element is not the first child element of Mosaic.  Template failure.";var timer=null;angular.element($window).bind("resize",onResize),$scope.$on("$destroy",function(){angular.element($window).unbind("resize",onResize)})}}}}).directive("mosaicTransclude",function(){return{restrict:"EAC",link:function($scope,$element,$attrs,controller,$transclude){if(!$transclude)throw minErr("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag($element));$transclude($scope,function(clone){$element.empty(),$element.append(clone)})}}})}(window,window.angular);
//# sourceMappingURL=angular-mosaic.min.js.map